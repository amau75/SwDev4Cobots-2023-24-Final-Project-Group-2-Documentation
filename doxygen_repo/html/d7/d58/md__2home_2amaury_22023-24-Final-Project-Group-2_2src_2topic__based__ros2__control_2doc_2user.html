<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>2023-24-Final-Project-Group-2: User Guide</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">2023-24-Final-Project-Group-2<span id="projectnumber">&#160;1.0</span>
   </div>
   <div id="projectbrief">The goal of the project is the development of a robotic application for human-robot handovers. Human-robot handovers present a set of challenges that need to be addressed to ensure seamless and safe collaboration between humans and robots. The key challenges include human intent recognition, handling a dynamic environment, timing and coordination, safety, adaptability to human variability, and acceptance and trust in the robotic system. While the problem has applications in several human-populated environments, such as service and healthcare, we will target an industrial scenario where the robot is collaborating with a human teammate.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">User Guide</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md9"></a> </p>
<h1><a class="anchor" id="autotoc_md10"></a>
Topic Based System</h1>
<p>The topic_based system implements <code>hardware_interface::SystemInterface</code> supporting command and state interfaces through ROS topic communication layer.</p>
<h2><a class="anchor" id="autotoc_md11"></a>
MoveIt and Isaac sim integration</h2>
<p>Follow the instructions in the <a href="https://moveit.picknik.ai/humble/doc/how_to_guides/how_to_guides.html">MoveIt and Isaac sim integration</a> guide to setup your robot for MoveIt and Isaac sim integration.</p>
<h2><a class="anchor" id="autotoc_md12"></a>
ros2_control urdf tag</h2>
<p>The topic_based system interface has a few <code>ros2_control</code> urdf tags to customize its behavior.</p>
<h3><a class="anchor" id="autotoc_md13"></a>
Parameters</h3>
<ul>
<li>joint_commands_topic: (default: "/robot_joint_command"). Example: <code>&lt;param name="joint_commands_topic"&gt;/my_topic_joint_commands&lt;/param&gt;</code>.</li>
<li>joint_states_topic: (default: "/robot_joint_states"). Example: <code>&lt;param name="joint_states_topic"&gt;/my_topic_joint_states&lt;/param&gt;</code>.</li>
<li>trigger_joint_command_threshold: (default: 1e-5). Used to avoid spamming the joint command topic when the difference between the current joint state and the joint command is smaller than this value, set to zero to always send the joint command. Example: <code>&lt;param name="trigger_joint_command_threshold"&gt;0.001&lt;/param&gt;</code>.</li>
<li>sum_wrapped_joint_states: (default: "false"). Used to track the total rotation for joint states the values reported on the <code>joint_commands_topic</code> wrap from 2*pi to -2*pi when rotating in the positive direction. (Isaac Sim only reports joint states from 2*pi to -2*pi) Example: <code>&lt;param name="sum_wrapped_joint_states"&gt;true&lt;/param&gt;</code>.</li>
</ul>
<h3><a class="anchor" id="autotoc_md14"></a>
Per-joint Parameters</h3>
<ul>
<li>mimic: Defined name of the joint to mimic. This is often used concept with parallel grippers. Example: <code>&lt;param name="mimic"&gt;joint1&lt;/param&gt;</code>.</li>
<li>multiplier: Multiplier of values for mimicking joint defined in mimic parameter. Example: <code>&lt;param name="multiplier"&gt;-2&lt;/param&gt;</code>.</li>
</ul>
<h2><a class="anchor" id="autotoc_md15"></a>
Modifying the urdf <code>ros2_control</code> tag for new robots</h2>
<p>If your robot description support mock_components you only need to change <code>&lt;plugin&gt;mock_components/GenericSystem&lt;/plugin&gt;</code> to <code>&lt;plugin&gt;topic_based_ros2_control/TopicBasedSystem&lt;/plugin&gt;</code>, make sure to add the <code>joint_commands_topic</code> and <code>joint_states_topic</code> to point to the correct topics.</p>
<div class="fragment"><div class="line">&lt;<span class="keywordtype">ros2_control</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;name&quot;</span> <span class="keyword">type</span>=<span class="stringliteral">&quot;system&quot;</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">hardware</span>&gt;</div>
<div class="line">        &lt;<span class="keywordtype">plugin</span>&gt;<span class="keyword">topic_based_ros2_control</span>/<span class="keyword">TopicBasedSystem</span>&lt;/<span class="keywordtype">plugin</span>&gt;</div>
<div class="line">        &lt;<span class="keywordtype">param</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;joint_commands_topic&quot;</span>&gt;/<span class="keyword">topic_based_joint_commands</span>&lt;/<span class="keywordtype">param</span>&gt;</div>
<div class="line">        &lt;<span class="keywordtype">param</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;joint_states_topic&quot;</span>&gt;/<span class="keyword">topic_based_joint_states</span>&lt;/<span class="keywordtype">param</span>&gt;</div>
<div class="line">        &lt;<span class="keywordtype">param</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;sum_wrapped_joint_states&quot;</span>&gt;<span class="keyword">true</span>&lt;/<span class="keywordtype">param</span>&gt;</div>
<div class="line">    &lt;/<span class="keywordtype">hardware</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">joint</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;joint_1&quot;</span>&gt;</div>
<div class="line">        &lt;<span class="keywordtype">command_interface</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;position&quot;</span>/&gt;</div>
<div class="line">        &lt;<span class="keywordtype">state_interface</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;position&quot;</span>&gt;</div>
<div class="line">          &lt;<span class="keywordtype">param</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;initial_value&quot;</span>&gt;0.0&lt;/<span class="keywordtype">param</span>&gt;</div>
<div class="line">        &lt;/<span class="keywordtype">state_interface</span>&gt;</div>
<div class="line">        &lt;<span class="keywordtype">state_interface</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;velocity&quot;</span>/&gt;</div>
<div class="line">    &lt;/<span class="keywordtype">joint</span>&gt;</div>
<div class="line">    ...</div>
<div class="line">    &lt;<span class="keywordtype">joint</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;joint_n&quot;</span>&gt;</div>
<div class="line">        &lt;<span class="keywordtype">command_interface</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;position&quot;</span>/&gt;</div>
<div class="line">        &lt;<span class="keywordtype">state_interface</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;position&quot;</span>&gt;</div>
<div class="line">          &lt;<span class="keywordtype">param</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;initial_value&quot;</span>&gt;0.0&lt;/<span class="keywordtype">param</span>&gt;</div>
<div class="line">        &lt;/<span class="keywordtype">state_interface</span>&gt;</div>
<div class="line">        &lt;<span class="keywordtype">state_interface</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;velocity&quot;</span>/&gt;</div>
<div class="line">    &lt;/<span class="keywordtype">joint</span>&gt;</div>
<div class="line">    ...</div>
<div class="line">    &lt;<span class="keywordtype">joint</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;mimic_joint_1&quot;</span>&gt;</div>
<div class="line">        &lt;<span class="keywordtype">param</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;mimic&quot;</span>&gt;<span class="keyword">joint_k</span>&lt;/<span class="keywordtype">param</span>&gt;</div>
<div class="line">        &lt;<span class="keywordtype">param</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;multiplier&quot;</span>&gt;1&lt;/<span class="keywordtype">param</span>&gt;</div>
<div class="line">        &lt;<span class="keywordtype">command_interface</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;position&quot;</span> /&gt;</div>
<div class="line">        &lt;<span class="keywordtype">state_interface</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;position&quot;</span>&gt;</div>
<div class="line">          &lt;<span class="keywordtype">param</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;initial_value&quot;</span>&gt;0.0&lt;/<span class="keywordtype">param</span>&gt;</div>
<div class="line">        &lt;/<span class="keywordtype">state_interface</span>&gt;</div>
<div class="line">        &lt;<span class="keywordtype">state_interface</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;velocity&quot;</span>/&gt;</div>
<div class="line">    &lt;/<span class="keywordtype">joint</span>&gt;</div>
<div class="line">    ...</div>
<div class="line">    &lt;<span class="keywordtype">joint</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;mimic_joint_n&quot;</span>&gt;</div>
<div class="line">        &lt;<span class="keywordtype">param</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;mimic&quot;</span>&gt;<span class="keyword">joint_kn</span>&lt;/<span class="keywordtype">param</span>&gt;</div>
<div class="line">        &lt;<span class="keywordtype">param</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;multiplier&quot;</span>&gt;1&lt;/<span class="keywordtype">param</span>&gt;</div>
<div class="line">        &lt;<span class="keywordtype">command_interface</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;position&quot;</span> /&gt;</div>
<div class="line">        &lt;<span class="keywordtype">state_interface</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;position&quot;</span>&gt;</div>
<div class="line">          &lt;<span class="keywordtype">param</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;initial_value&quot;</span>&gt;0.0&lt;/<span class="keywordtype">param</span>&gt;</div>
<div class="line">        &lt;/<span class="keywordtype">state_interface</span>&gt;</div>
<div class="line">        &lt;<span class="keywordtype">state_interface</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;velocity&quot;</span>/&gt;</div>
<div class="line">    &lt;/<span class="keywordtype">joint</span>&gt;</div>
<div class="line">&lt;/<span class="keywordtype">ros2_control</span>&gt;</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
